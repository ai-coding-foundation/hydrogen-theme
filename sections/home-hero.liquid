{%- liquid
  assign preload = true
  assign loading = 'eager'
  assign fetchpriority = 'high'
-%}

<div
  id="HomeHero-{{ section.id }}"
  class="h-screen-no-nav relative flex w-full flex-col items-center justify-center overflow-hidden"
>
  {%- comment -%} Background image layer {%- endcomment -%}
  <div class="pointer-events-none absolute inset-0 -z-20">
    {%- if section.settings.image != blank -%}
      {%- liquid
        assign image_height = section.settings.image.width | divided_by: section.settings.image.aspect_ratio
      -%}
      {{
        section.settings.image
        | image_url: width: 1500
        | image_tag:
          loading: loading,
          preload: preload,
          fetchpriority: fetchpriority,
          width: section.settings.image.width,
          height: image_height,
          class: 'block h-full w-full object-cover',
          sizes: '100vw',
          widths: '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840',
          alt: section.settings.image.alt
        | escape
      }}
    {%- else -%}
      <div class="bg-primary h-full w-full">
        {{ 'lifestyle-2' | placeholder_svg_tag: 'h-full w-full object-cover fill-primary/20' }}
      </div>
    {%- endif -%}
  </div>

  {%- comment -%} Dark overlay for text contrast {%- endcomment -%}
  <div
    class="bg-primary pointer-events-none absolute inset-0 -z-10"
    style="opacity: calc({{ section.settings.overlay_opacity }} / 100);"
    aria-hidden="true"
  ></div>

  {%- comment -%} Content layer {%- endcomment -%}
  <div class="max-w-prose-narrow relative z-0 flex flex-col items-center justify-center gap-6 px-6 text-center sm:px-8 md:px-12">
    {%- assign heading_tag = section.settings.heading_level -%}
    <{{ heading_tag }}
      class="font-heading font-heading-weight text-display text-contrast"
    >
      {{ section.settings.heading | escape }}
    </{{ heading_tag }}>

    {%- if section.settings.subheading != blank -%}
      <p class="text-lead font-body text-contrast/90">
        {{ section.settings.subheading | escape }}
      </p>
    {%- endif -%}

    {%- if section.settings.button_label != blank -%}
      {%- render 'button', content: section.settings.button_label, href: section.settings.button_link, size: 'lg' -%}
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "Home hero",
  "tag": "section",
  "class": "section-home-hero",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Background image"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Your body evolves. Your essentials should too."
    },
    {
      "type": "select",
      "id": "heading_level",
      "label": "Heading level",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        }
      ],
      "default": "h1"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Stage-specific nutrition for every phase of womanhood"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Find Your Stage"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Overlay opacity",
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "Home hero",
      "category": "Homepage"
    }
  ]
}
{% endschema %}
